require(["/Content/minjs/config.js"],function(){require(["jquery","base","utils","pop_window","domReady"],function(a,b,c){function d(){a.when(b.getData({},"/ERPBrand/GetAllBranList")).done(function(a){e(a),_load_items(1)})}function e(b){var c=a(".brandId");c.empty(),c.prev().find("._select_text").text("全部"),c.append(a('<option value="-1">全部</option>'));for(var d=0;d<b.length;d++){var e=a('<option value="1"></option>');e.attr("value",b[d].id).text(b[d].name),c.append(e)}}function f(b){var c=a(".plan_con ._list_table tbody");c.empty();for(var d=0;d<b.length;d++)if(b[d]){var e=a(h),f=b[d].split("：");e.children().eq(1).text(f[0]),e.children().eq(2).text(f[1]),c.append(e)}}b.init();var g,h='<tr><td><input type="checkbox"></td><td>113</td><td>213</td><td class="_td_10 _over_text"><input type="text" class="_input_area" placeholder="本次入库数量" onkeyup="this.value = this.value.replace(/\\D/g, \'\')" onafterpaste="this.value = this.value.replace(/\\D/g, \'\')"></td></tr>';d(),window._load_items=function(c){a.when(b.loadHtmlData({store_state:a(".store_status").val(),brandId:a(".brandId").val(),searchKey:a(".search_input").val(),pageIndex:c},"/ERPStore/GetProductStoreIn")).done(function(b){a("._ajax_container").empty().append(b)})},a("._ajax_container").on("click",".store_in",function(){g=a(this).attr("_id");var b=a(this).parent().prev().prev().attr("title");b?(b=b.replace(/【/g,"").split("】"),f(b),a(".plan_con").fadeIn()):a.Message({type:"alert",content:"参数错误,请刷新页面！"})}),a(".plan_con input:first").on("blur",function(){var b=+a(this).val();a(".plan_con ._list_table input").each(function(c,d){a(d).val(b)})}),a(".plan_con").on("click",".sub_mit",function(){var d={},e=[],f=!1;if(a(".plan_con ._list_table .plus").each(function(b,c){var d={};return d.packageNumber=a(c).children().eq(1).text(),d.number=a(c).children().eq(3).children().val(),d.number?void e.push(d):(a.Message({type:"alert",content:"请输入"+d.packageNumber+"本次入库数量！"}),f=!0,!1)}),!f){if(0===e.length)return void a.Message({type:"alert",content:"请选择包！"});d.orderId=g,d.data=c.json2str(e),a.when(b.getCodeData(d,"/ERPStore/SetStorageIn","post")).done(function(){a.Message({type:"alert",content:"提交成功！"}),a(".plan_con").fadeOut(),_load_items(1)})}})})});